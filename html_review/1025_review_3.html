<!-- 1025_review_3.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1025review3</title>
    <style>
        .todos{
            border:1px solid blue;
            color:violet;
            padding:20px;
            width:300px;
            margin-bottom:10px;
            list-style:none;
        }
    </style>
</head>
<body>
    <input type="text" id="todo" placeholder="할일 작성" />
    <button onclick="addToDo()">할일 목록에 추가</button>
    <br/><hr/>
    <button onclick="removeToDo();">할일 목록에서 삭제</button>

    <button onclick="removeList()">값이 일치하는 할일 목록 삭제</button>
    <br/>
    <hr/>

    <ul id="toDoList">

    </ul>

    <script>
        // ul#toDoList
        let toDoList = document.querySelector("#toDoList");
        for(let i = 0; i< 5; i++){
            let li = document.createElement('li');
            li.innerText = '할일추가-'+i;
            li.className = 'todos';
            toDoList.prepend(li); 
        }

        // todo 목록 추가
        function addToDo(){
            let toDoNode = document.querySelector("#todo");     // 그냥 document라고 들고오는건 안되는지...?
            console.log(toDoNode.value);
            let li = document.createElement('li');
            li.innerText = toDoNode.value;
            li.classList.add('todos');
            toDoList.prepend(li);
        }

        // 첫번째 또는 마지막 할일 목록 아이템 제거
        function removeToDo(){
            let removeTarget = toDoList.lastElementChild;
            toDoList.removeChild(removeTarget);
            if(removeTarget !=null){
                toDoList.removeChild(removeTarget);
            }else{
                alert('더이상 삭제할 할일이 존재하지 않습니다.');
            }
        }

        // 입력필드에 작성된 할일 목록과 일치하는 리스트아이템 삭제
        function removeList(){
            // 입력 필드에 작성된 할일 내용
            let todoText = document.getElementById("todo").value;
            console.log(todoText);
            // 기록된 리스트들을 가져오는 것
            let todos = document.getElementsByClassName("todos");
            console.log(todos);
            todos = document.getElementsByTagName('li');
            console.log(todos);
            todos = document.querySelectorAll('#toDoList > .todos');
            console.log(todos);
            todos = toDoList.children;
            console.log(todos);
            
            // 삭제할 요소를 저장할 변수
            let removeTarget = null;

            for(let i = 0;i < todos.length; i++){
                console.log('todoText :' + todoText);
                console.log('todos innerText' + todos[i].innerText);
                if(todoText == todos[i].innerText){
                    console.log('일치하는 요소');
                    console.log(todos[i]);
                    removeTarget = todos[i];
                    break;
                }
            } //    end for문
            console.log('삭제할 대상 :');
            console.log(removeTarget);

            if(removeTarget != null){
                // text가 일치하는 li요소가 존재
                removeTarget.remove();
            }else{
                alert('동일한 항목이 존재하지 않습니다.');
            }
        }
    </script>
</body>
</html>